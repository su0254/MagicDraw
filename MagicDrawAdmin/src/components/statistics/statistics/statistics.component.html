<div class="statistics-container">
    <div class="page-header">
      <h1 class="page-title">Statistics</h1>
      
      <mat-form-field appearance="outline" class="date-range">
        <mat-label>Date Range</mat-label>
        <mat-date-range-input [rangePicker]="picker">
          <input matStartDate placeholder="Start date" [value]="startDate">
          <input matEndDate placeholder="End date" [value]="endDate" (dateChange)="updateDateRange($event)">
        </mat-date-range-input>
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker>
      </mat-form-field>
    </div>
    
    <div class="stat-cards">
      <mat-card class="stat-card">
        <div class="stat-card-content">
          <div class="stat-card-icon" style="background-color: #3f51b5;">
            <mat-icon>image</mat-icon>
          </div>
          <div class="stat-card-info">
            <h3>Total Drawings</h3>
            <p class="stat-value">{{ totalDrawings | number }}</p>
          </div>
        </div>
      </mat-card>
      
      <mat-card class="stat-card">
        <div class="stat-card-content">
          <div class="stat-card-icon" style="background-color: #f44336;">
            <mat-icon>people</mat-icon>
          </div>
          <div class="stat-card-info">
            <h3>Total Users</h3>
            <p class="stat-value">{{ totalUsers | number }}</p>
          </div>
        </div>
      </mat-card>
      
      <mat-card class="stat-card">
        <div class="stat-card-content">
          <div class="stat-card-icon" style="background-color: #4caf50;">
            <mat-icon>visibility</mat-icon>
          </div>
          <div class="stat-card-info">
            <h3>Total Views</h3>
            <p class="stat-value">{{ totalViews}}</p>
          </div>
        </div>
      </mat-card>
      
      <mat-card class="stat-card">
        <div class="stat-card-content">
          <div class="stat-card-icon" style="background-color: #ff9800;">
            <mat-icon>favorite</mat-icon>
          </div>
          <div class="stat-card-info">
            <h3>Total Likes</h3>
            <p class="stat-value">{{ totalLikes | number }}</p>
          </div>
        </div>
      </mat-card>
    </div>
    
    <div class="stats-row">
      <mat-card class="stats-card">
        <mat-card-header>
          <mat-card-title>Drawings by Category</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="chart-container">
            <div class="chart-placeholder">
              <div class="pie-chart-placeholder"></div>
            </div>
            <div class="chart-legend">
              <div class="legend-item" *ngFor="let category of categoryStats">
                <div class="legend-color" [style.background-color]="category.color"></div>
                <div class="legend-info">
                  <span class="legend-name">{{ category.name }}</span>
                  <span class="legend-value">{{ category.count }} ({{ category.percentage }}%)</span>
                </div>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
      
      <mat-card class="stats-card">
        <mat-card-header>
          <mat-card-title>Top Contributors</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="top-users">
            <div class="user-item" *ngFor="let user of topUsers; let i = index">
              <div class="user-rank">{{ i + 1 }}</div>
              <div class="user-avatar">
                <img [src]="user.avatar" alt="{{ user.name }}'s avatar">
              </div>
              <div class="user-info">
                <span class="user-name">{{ user.name }}</span>
                <span class="user-uploads">{{ user.uploads }} uploads</span>
              </div>
              <div class="user-badge" *ngIf="i === 0">
                <mat-icon>emoji_events</mat-icon>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
    
    <mat-card class="full-width-card">
      <mat-card-header>
        <mat-card-title>Monthly Activity</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="chart-container">
          <div class="bar-chart-placeholder"></div>
        </div>
        <div class="chart-legend horizontal">
          <div class="legend-item">
            <div class="legend-color" style="background-color: #3f51b5;"></div>
            <span>Uploads</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: #f44336;"></div>
            <span>Views (hundreds)</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
    
    <div class="stats-row">
      <mat-card class="stats-card">
        <mat-card-header>
          <mat-card-title>Popular Drawing Times</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="chart-container">
            <div class="heatmap-placeholder"></div>
          </div>
        </mat-card-content>
      </mat-card>
      
      <mat-card class="stats-card">
        <mat-card-header>
          <mat-card-title>User Growth</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="chart-container">
            <div class="line-chart-placeholder"></div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
  